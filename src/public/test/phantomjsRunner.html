<!DOCTYPE HTML>
<html>
<head>
  <title>PhantomJS Jasmine Test Runner</title>
    <!--
        This is s copy of the test runner to be used specifically by PhantomJS.

        NOTE: if you make changes to any of the files loaded here, you need to do the same in SpecRunner.html
    -->

    <link rel="stylesheet" type="text/css" href="lib/jasmine-1.3.1/jasmine.css">

    <!-- ExtJS -->
    <script type="text/javascript" src="../ext/ext-all-debug.js"></script>

    <!-- Jasmine libs -->
    <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine.js"></script>
    <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine-html.js"></script>
    <script type="text/javascript" src="lib/jasmine-reporters/jasmine.phantomjs-reporter.js"></script>
    <script type="text/javascript" src="lib/sinon-1.7.1.js"></script>

    <!-- Thetus test helpers (and dependencies) -->
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="helpers/FakeServer.js"></script>
    <script type="text/javascript" src="helpers/ExtInitializer.js"></script>
    <script type="text/javascript" src="helpers/ExtHelpers.js"></script>

    <!-- Crumbnet -->
    <script type="text/javascript" src="../resources/GoJS/release/go-debug.js"></script>

    <!-- Flexpaper -->
    <!-- <script src='lib/jquery/jquery.min.js'></script>
     <script src='lib/jquery/jquery.extensions.min.js'></script>
     <link rel='stylesheet' href='lib/flexpaper/css/flexpaper.css'/>
     <script type='text/javascript' src='lib/flexpaper/js/flexpaper.js'></script>
     <script type='text/javascript' src='lib/flexpaper/js/flexpaper_handlers.js'></script>-->

    <!-- Leaflet -->
    <script type='text/javascript' src='../resources/Leaflet/leaflet.js'></script>
    <link rel="stylesheet" href="../resources/Leaflet/leaflet.draw.css" />
    <script type='text/javascript' src='../resources/Leaflet/leaflet.draw-src.js'></script>
    <link rel="stylesheet" href="../resources/Leaflet/L.Control.Zoomslider.css" />
    <script type='text/javascript' src='../resources/Leaflet/L.Control.Zoomslider.js'></script>

    <!-- include fixture files here... -->
    <!--<script type="text/javascript" src="fixtures/SOME_FIXTURE_FILE.js"></script>-->
    <script type="text/javascript" src="fixtures/DalSources.js"></script>
    <script type="text/javascript" src="fixtures/Crumbnet.js"></script>
    <script type="text/javascript" src="fixtures/SearchResults.js"></script>
    <script type="text/javascript" src="fixtures/HistoryResults.js"></script>
    <script type="text/javascript" src="fixtures/LocationSources.js"></script>


    <!-- include spec files here... -->
    <script type="text/javascript" src="specs/SavannaConfigSpec.js"></script>
    <script type="text/javascript" src="specs/MainSpec.js"></script>
    <script type="text/javascript" src="specs/ControllerFactorySpec.js"></script>
    <script type="text/javascript" src="specs/StoreableMixinSpec.js"></script>
    <script type="text/javascript" src="specs/CorsProxySpec.js"></script>
    <script type="text/javascript" src="specs/PrintModalSpec.js"></script>
    <script type="text/javascript" src="specs/DalSearchSpec.js"></script>
    <script type="text/javascript" src="specs/TaperedLinkSpec.js"></script>
    <script type="text/javascript" src="specs/CrumbnetSpec.js"></script>
    <script type="text/javascript" src="specs/SearchComponentSpec.js"></script>
    <script type="text/javascript" src="specs/ResultsComponentSpec.js"></script>
    <script type="text/javascript" src="specs/LeafletSpec.js"></script>
    <script type="text/javascript" src="specs/LocationSearchSpec.js"></script>

</head>
<body>

<script type="text/javascript">
    (function() {
        var jasmineEnv = jasmine.getEnv();
        jasmineEnv.updateInterval = 1000;

        var reporter = new jasmine.HtmlReporter();

        if (jasmine.PhantomJSReporter) {
            reporter = new jasmine.PhantomJSReporter();
        }
        else {
            console.error('Unable to add PhantomJSReporter...');
        }

        jasmineEnv.addReporter(reporter);

        if (reporter.specFilter) {
            jasmineEnv.specFilter = function(spec) {
                return reporter.specFilter(spec);
            };
        }

        var currentWindowOnload = window.onload;

        window.onload = function() {
            if (currentWindowOnload) {
                currentWindowOnload();
            }

            var origErrorHandler = Ext.Error.handle;
            Ext.Error.handle = function() {
                origErrorHandler.apply(this, arguments);
                return true;
            };

            Ext.onReady(function() {
                jasmineEnv.execute();
            });
        };
    })();
</script>

</body>
</html>
